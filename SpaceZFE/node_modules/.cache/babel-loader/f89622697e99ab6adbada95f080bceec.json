{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRoute } from \"vue-router\";\nexport default {\n  setup() {\n    const details = ref({\n      // id: 0,\n      // spaceType: \"\",\n      // capacity: 0,\n      // rentalCost: 0,\n      // lineIntro: \"\",\n      // shortInto: \"\",\n      // imgs: [],\n\n      // spaceIntro: \"\",\n      // location: \"\",\n      // useRule: \"\",\n      // reviews: [],\n      // qnas: [],\n\n      space: {},\n      // spaceId: 0,\n      // companyId: 0,\n      // memberId: 0,\n      // spaceName: \"\",\n      // info: \"\",\n      // moreInfo: \"\",\n      // imgName: \"\",\n      // type: \"\",\n      // location: \"\",\n      // capacity: 0,\n      // price: 0,\n\n      reviews: [],\n      replys: [],\n      qnas: [],\n      avgRating: 0,\n      merchant_uid: \"\"\n    });\n    const requests = ref([]);\n    const route = useRoute();\n    let officePrice = ref(0);\n    let nOfficePrice = ref(0);\n    let now = ref(\"\");\n    const num1 = ref();\n    const num2 = ref();\n\n    // const map = ref('')\n    const errMessage = ref(\"\");\n    const startDate = ref(\"\");\n    const endDate = ref(\"\");\n    const startDateTime = ref(\"\");\n    const endDateTime = ref(\"\");\n    const locClicked = ref(false);\n    const locationClicked = ref(false);\n    const reviewClicked = ref(false);\n    const qnaClicked = ref(false);\n    let currentImgNum = ref(0);\n    let currentImg = ref(\"\");\n\n    // refreshAll();\n\n    const getDetails = async () => {\n      const res = await axios.get(\"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + route.params.id);\n      // console.log(res);\n      details.value = {\n        ...res.data\n      };\n      console.log(details.value.merchant_uid);\n      // console.log(details.value);\n      // console.log(res.request);\n      // requests.value = JSON.parse(res.request.response).merchant_uid;\n      // console.log(requests.value);\n      // console.log(res.request.response.merchant_uid);\n      // 지우면 안됌\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\n      // console.log(details.value.imgs[currentImgNum.value].img);\n    };\n\n    getDetails();\n\n    // console.log(requests.value);\n    console.log(details.value.merchant_uid);\n    console.log(details.value.avgRating);\n\n    //메인사진 클릭시 변경\n    const changePic = () => {\n      currentImgNum.value++;\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\n      console.log(currentImgNum.value);\n      if (currentImgNum.value === details.value.imgs.length) {\n        currentImgNum.value = 0;\n      }\n      console.log(currentImgNum.value);\n      currentImg.value = details.value.imgs[currentImgNum.value].img;\n    };\n\n    //사진 리스트 클릭시 해당 사진 변경\n    const directChangePic = e => {\n      console.log(e);\n    };\n\n    //오피스 대여 비용 계산기\n    const rentOfficeCheck = () => {\n      //반납일이 대여일보다 빠르면 오류 메세지 출력\n      if (endDate.value < startDate.value) {\n        errMessage.value = \"반납불가능한 시간 입니다\";\n        officePrice.value = 0;\n      } else {\n        errMessage.value = \"\";\n        let total;\n        //구한 날짜를 일수로 변환하는 함수\n        const getDateDiff = (d1, d2) => {\n          const date1 = new Date(d1);\n          const date2 = new Date(d2);\n          const diffDate = date1.getTime() - date2.getTime();\n          return Math.abs(diffDate / (1000 * 60 * 60 * 24));\n        };\n        //db에 저장한 공간의 대여로 곱하기 위에서 구한 일수\n        total = getDateDiff(endDate.value, startDate.value) * details.value.rentalCost;\n        //가시성 좋게 1000단위 마다 ,찍는 로직 추가\n        officePrice.value = total.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n    };\n\n    //렌트 비용 계산기 대여시각보다 반납시각이 이르면 오류 메세지 출력\n    const rentTimeCheck = () => {\n      if (endDateTime.value < startDateTime.value) {\n        errMessage.value = \"반납불가능한 시간 입니다\";\n        nOfficePrice.value = 0;\n      } else {\n        let total;\n        errMessage.value = \"\";\n        total = (endDateTime.value - startDateTime.value) * details.value.space.price;\n        nOfficePrice.value = total.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n    };\n\n    //시간 보여줄때 옆에 날짜도 보여주는 기능\n    const date = new Date();\n    now = `${date.getMonth() + 1}-${date.getDate()}`;\n\n    //데스크 회의실 - 결제(후불) 버튼\n    const submit = async () => {\n      // post정보 확인\n      // console.log(\n      //   details.value.id,\n      //   startDateTime.value,\n      //   endDateTime.value,\n      //   nOfficePrice.value\n      // );\n      //  IMP.init(\"imp76177137\");\n      //   IMP.request_pay(\n      // {\n      //   pg: \"kakaopay.TCSUBSCRIP\",\n      //   pay_method: \"card\", // 기능 없음.\n      //   merchant_uid: `${requests.value}`, // 상점에서 관리하는 주문 번호\n      //   name: details.value.space.spaceName,\n      //   amount: details.value.space.price, // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\n      //   customer_uid: \"1\", // 필수 입력\n      //   buyer_email: \"iamport@siot.do\",\n      //   buyer_name: \"아임포트\",\n      //   buyer_tel: \"02-1234-1234\",\n      // }\n      try {\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          spaceId: details.value.id,\n          memberId: localStorage.getItem(\"memberId\"),\n          startDate: startDateTime.value,\n          endDate: endDateTime.value,\n          price: nOfficePrice.value\n        });\n      } catch (error) {\n        console.alert(\"error:\" + error);\n      }\n    };\n    //데스크 회의실 - 선불 버튼\n    const preSubmit = async () => {\n      try {\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          spaceId: details.value.id,\n          memberId: localStorage.getItem(\"memberId\"),\n          startDate: startDateTime.value,\n          endDate: endDateTime.value,\n          price: nOfficePrice.value,\n          prepay: \"선결제\"\n        });\n      } catch (error) {\n        console.alert(\"error:\" + error);\n      }\n    };\n\n    //오피스 - 결제 버튼\n    const resSubmit = async () => {\n      try {\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          spaceID: details.value.id,\n          startDate: startDate.value,\n          endDate: endDate.value,\n          price: officePrice.value\n        });\n      } catch (error) {\n        console.alert(\"error:\" + error);\n      }\n    };\n\n    // 하단 nav바 버튼들\n    const locClick = () => {\n      locClicked.value = !locClicked.value;\n      locationClicked.value = false;\n      reviewClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showLocation = () => {\n      locationClicked.value = !locationClicked.value;\n      locClicked.value = false;\n      reviewClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showReviews = () => {\n      reviewClicked.value = !reviewClicked.value;\n      locationClicked.value = false;\n      locClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showQna = () => {\n      qnaClicked.value = !qnaClicked.value;\n      locationClicked.value = false;\n      locClicked.value = false;\n      reviewClicked.value = false;\n    };\n    return {\n      details,\n      currentImg,\n      currentImgNum,\n      locClick,\n      locClicked,\n      locationClicked,\n      showLocation,\n      showReviews,\n      reviewClicked,\n      qnaClicked,\n      showQna,\n      changePic,\n      startDate,\n      date,\n      endDate,\n      resSubmit,\n      officePrice,\n      nOfficePrice,\n      startDateTime,\n      endDateTime,\n      submit,\n      num1,\n      num2,\n      errMessage,\n      now,\n      rentTimeCheck,\n      directChangePic,\n      rentOfficeCheck,\n      preSubmit\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","axios","useRoute","setup","details","space","reviews","replys","qnas","avgRating","merchant_uid","requests","route","officePrice","nOfficePrice","now","num1","num2","errMessage","startDate","endDate","startDateTime","endDateTime","locClicked","locationClicked","reviewClicked","qnaClicked","currentImgNum","currentImg","getDetails","res","get","params","id","value","data","console","log","changePic","imgs","length","img","directChangePic","e","rentOfficeCheck","total","getDateDiff","d1","d2","date1","Date","date2","diffDate","getTime","Math","abs","rentalCost","toString","replace","rentTimeCheck","price","date","getMonth","getDate","submit","post","spaceId","memberId","localStorage","getItem","error","alert","preSubmit","prepay","resSubmit","spaceID","locClick","showLocation","showReviews","showQna"],"sourceRoot":"","sources":["C:\\Users\\qwe17\\golfzon\\vue_prac\\SpaceZFE-1\\SpaceZFE\\src\\components\\Details.vue"],"sourcesContent":["// eslint-disable-next-line\r\n<template>\r\n  <div>\r\n    <div class=\"picsAndIntro\">\r\n      <div class=\"form\">\r\n        <p class=\"lineIntro\">{{ details.space.spaceName }}</p>\r\n        <br />\r\n        <p class=\"shortInto\">{{ details.space.info }}</p>\r\n        <div class=\"img\">\r\n          <img class=\"big\" name=\"big\" :src=\"currentImg\" @click=\"changePic\" />\r\n          <img class=\"big\" name=\"big\" :src=\"http://localhost:8090/spaceZBE/resources/upload/90fa5a82-fb63-4da0-9f23-6e0bb6910de0_%EC%82%AC%EC%A7%84.jpg\" @click=\"changePic\" />\r\n          <!-- details.imgs[currentImgNum].img -->\r\n          <br />\r\n\r\n          <img\r\n            class=\"list\"\r\n            v-for=\"name in details.imgs\"\r\n            :key=\"name.id\"\r\n            :src=\"name.img\"\r\n            @click=\"directChangePic\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"res\">\r\n      <div class=\"resForm\">\r\n        <div v-if=\"details.space.type == 'office'\">\r\n          <p class=\"chooseDate\">날짜 선택</p>\r\n          <div class=\"calender\">\r\n            <input\r\n              class=\"date\"\r\n              type=\"date\"\r\n              v-model=\"startDate\"\r\n              style=\"margin-right: 20px\"\r\n            />\r\n            <span style=\"font-size: 25px\">-</span>\r\n            <input\r\n              class=\"date\"\r\n              type=\"date\"\r\n              v-model=\"endDate\"\r\n              style=\"margin-left: 20px\"\r\n              @change=\"rentOfficeCheck\"\r\n            />\r\n          </div>\r\n          <p>{{ errMessage }}</p>\r\n          <div class=\"priceDiv\">\r\n            <p class=\"price\">\r\n              가격\r\n              <!-- <input type=\"number\" v-model=\"officePrice\" /> -->\r\n              {{ officePrice }}\r\n              원\r\n            </p>\r\n          </div>\r\n          <p class=\"payRule\">\r\n            &#8251;오피스 예약은 후불제이며 선결제가 불가능합니다&#8251;\r\n          </p>\r\n          <button @click=\"resSubmit\">예약하기</button>\r\n        </div>\r\n        <div v-if=\"details.space.type !== 'office'\">\r\n          <p class=\"chooseDate\">날짜 및 시간 선택</p>\r\n          <div class=\"calender\">\r\n            <label style=\"font-size: 20px\">대여시각: {{ now }}-</label>\r\n            <select\r\n              class=\"time\"\r\n              v-model=\"startDateTime\"\r\n              style=\"margin-right: 10px\"\r\n            >\r\n              <option v-for=\"num1 in 24\" :key=\"num1.id\" :value=\"num1\">\r\n                {{ num1 }}시\r\n              </option>\r\n            </select>\r\n            <label style=\"margin-left: 10px; font-size: 20px\"\r\n              >반납시각:{{ now }}-</label\r\n            >\r\n            <select\r\n              class=\"time\"\r\n              v-model=\"endDateTime\"\r\n              style=\"margin-right: 20px\"\r\n              @change=\"rentTimeCheck\"\r\n            >\r\n              <option v-for=\"num2 in 24\" :key=\"num2.id\" :value=\"num2\">\r\n                {{ num2 }}시\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <p>{{ errMessage }}</p>\r\n          <div class=\"priceDiv\">\r\n            <p class=\"price\">가격 {{ nOfficePrice }}원</p>\r\n          </div>\r\n          <p class=\"payRule\">\r\n            &#8251;선결제 예약 시 보증금을 포함한 전 금액을 지불하고, 결재금액의\r\n            5%가 적립됩니다. 보증금으로 예약시 전 금액의 20%가 결제됩니다&#8251;\r\n          </p>\r\n          <div class=\"buttons\">\r\n            <button class=\"preSubmit\" @click=\"preSubmit\">\r\n              선결제로 예약하기\r\n            </button>\r\n            <button class=\"depositSubmit\" @click=\"submit\">\r\n              보증금으로 예약하기\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"detailNavDiv\">\r\n      <nav class=\"detailNav\">\r\n        <ul class=\"nav\" @click=\"locClick\">\r\n          <p class=\"hover\" v-if=\"!locClicked\">장소 소개</p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"locClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            장소 소개\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showLocation\">\r\n          <p class=\"hover\" v-if=\"!locationClicked\">장소 위치</p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"locationClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            장소 위치\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showReviews\">\r\n          <p class=\"hover\" v-if=\"!reviewClicked\">\r\n            리뷰\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.reviews.length\r\n            }}</a>\r\n          </p>\r\n\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"reviewClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            리뷰\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.reviews.length\r\n            }}</a>\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showQna\">\r\n          <p class=\"hover\" v-if=\"!qnaClicked\">\r\n            Q&A\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.qnas.length\r\n            }}</a>\r\n          </p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"qnaClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            Q&A\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.qnas.length\r\n            }}</a>\r\n          </p>\r\n        </ul>\r\n      </nav>\r\n      <div class=\"navContainer\">\r\n        <div class=\"locClicked\" v-show=\"locClicked\">\r\n          {{ details.space.moreInfo }}\r\n        </div>\r\n        <div class=\"locationClicked\" v-show=\"locationClicked\">\r\n          <!-- {{ details.space.location }}<br /> -->\r\n          <!-- <iframe :src=\"details.location\">{{ details.location }} </iframe> -->\r\n          <!-- <div :id=\"mapContainer\" style=\"width: 300px; height: 300px\"></div> -->\r\n        </div>\r\n        <div class=\"reviewClicked\" v-show=\"reviewClicked\">\r\n          <div style=\"margin-top: 20px\">\r\n            <a class=\"reviews\" v-for=\"num in details.reviews\" :key=\"num\">\r\n              {{ num.reviewId }} {{ num.length }} <br />\r\n              {{ num.content }} {{ num.reviewDate }}\r\n              <!-- {{ num.reviewer }} {{ num.starRating }} <br />\r\n              {{ num.reviewContent }} <br /> -->\r\n              <hr />\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"qnaClicked\" v-show=\"qnaClicked\">\r\n          <div style=\"margin-top: 20px\">\r\n            <a class=\"qnas\" v-for=\"num in details.qnas\" :key=\"num\">\r\n              질문자:{{ num.memberId }} <br />\r\n              내용:{{ num.content }} <br />\r\n              답변:{{ num.title }} <br />\r\n              <hr />\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRoute } from \"vue-router\";\r\n\r\nexport default {\r\n  setup() {\r\n    const details = ref({\r\n      // id: 0,\r\n      // spaceType: \"\",\r\n      // capacity: 0,\r\n      // rentalCost: 0,\r\n      // lineIntro: \"\",\r\n      // shortInto: \"\",\r\n      // imgs: [],\r\n\r\n      // spaceIntro: \"\",\r\n      // location: \"\",\r\n      // useRule: \"\",\r\n      // reviews: [],\r\n      // qnas: [],\r\n\r\n      space: {},\r\n      // spaceId: 0,\r\n      // companyId: 0,\r\n      // memberId: 0,\r\n      // spaceName: \"\",\r\n      // info: \"\",\r\n      // moreInfo: \"\",\r\n      // imgName: \"\",\r\n      // type: \"\",\r\n      // location: \"\",\r\n      // capacity: 0,\r\n      // price: 0,\r\n\r\n      reviews: [],\r\n      replys: [],\r\n      qnas: [],\r\n      avgRating: 0,\r\n      merchant_uid: \"\",\r\n    });\r\n\r\n    const requests = ref([]);\r\n    const route = useRoute();\r\n    let officePrice = ref(0);\r\n    let nOfficePrice = ref(0);\r\n\r\n    let now = ref(\"\");\r\n\r\n    const num1 = ref();\r\n    const num2 = ref();\r\n\r\n    // const map = ref('')\r\n    const errMessage = ref(\"\");\r\n    const startDate = ref(\"\");\r\n    const endDate = ref(\"\");\r\n    const startDateTime = ref(\"\");\r\n    const endDateTime = ref(\"\");\r\n    const locClicked = ref(false);\r\n    const locationClicked = ref(false);\r\n    const reviewClicked = ref(false);\r\n    const qnaClicked = ref(false);\r\n\r\n    let currentImgNum = ref(0);\r\n    let currentImg = ref(\"\");\r\n\r\n    // refreshAll();\r\n\r\n    const getDetails = async () => {\r\n      const res = await axios.get(\r\n        \"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + route.params.id\r\n      );\r\n      // console.log(res);\r\n      details.value = { ...res.data };\r\n      console.log(details.value.merchant_uid);\r\n      // console.log(details.value);\r\n      // console.log(res.request);\r\n      // requests.value = JSON.parse(res.request.response).merchant_uid;\r\n      // console.log(requests.value);\r\n      // console.log(res.request.response.merchant_uid);\r\n      // 지우면 안됌\r\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\r\n      // console.log(details.value.imgs[currentImgNum.value].img);\r\n    };\r\n    getDetails();\r\n\r\n    // console.log(requests.value);\r\n    console.log(details.value.merchant_uid);\r\n    console.log(details.value.avgRating);\r\n\r\n    //메인사진 클릭시 변경\r\n    const changePic = () => {\r\n      currentImgNum.value++;\r\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\r\n      console.log(currentImgNum.value);\r\n      if (currentImgNum.value === details.value.imgs.length) {\r\n        currentImgNum.value = 0;\r\n      }\r\n      console.log(currentImgNum.value);\r\n      currentImg.value = details.value.imgs[currentImgNum.value].img;\r\n    };\r\n\r\n    //사진 리스트 클릭시 해당 사진 변경\r\n    const directChangePic = (e) => {\r\n      console.log(e);\r\n    };\r\n\r\n    //오피스 대여 비용 계산기\r\n    const rentOfficeCheck = () => {\r\n      //반납일이 대여일보다 빠르면 오류 메세지 출력\r\n      if (endDate.value < startDate.value) {\r\n        errMessage.value = \"반납불가능한 시간 입니다\";\r\n        officePrice.value = 0;\r\n      } else {\r\n        errMessage.value = \"\";\r\n        let total;\r\n        //구한 날짜를 일수로 변환하는 함수\r\n        const getDateDiff = (d1, d2) => {\r\n          const date1 = new Date(d1);\r\n          const date2 = new Date(d2);\r\n          const diffDate = date1.getTime() - date2.getTime();\r\n          return Math.abs(diffDate / (1000 * 60 * 60 * 24));\r\n        };\r\n        //db에 저장한 공간의 대여로 곱하기 위에서 구한 일수\r\n        total =\r\n          getDateDiff(endDate.value, startDate.value) *\r\n          details.value.rentalCost;\r\n        //가시성 좋게 1000단위 마다 ,찍는 로직 추가\r\n        officePrice.value = total\r\n          .toString()\r\n          .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      }\r\n    };\r\n\r\n    //렌트 비용 계산기 대여시각보다 반납시각이 이르면 오류 메세지 출력\r\n    const rentTimeCheck = () => {\r\n      if (endDateTime.value < startDateTime.value) {\r\n        errMessage.value = \"반납불가능한 시간 입니다\";\r\n        nOfficePrice.value = 0;\r\n      } else {\r\n        let total;\r\n        errMessage.value = \"\";\r\n        total =\r\n          (endDateTime.value - startDateTime.value) * details.value.space.price;\r\n        nOfficePrice.value = total\r\n          .toString()\r\n          .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      }\r\n    };\r\n\r\n    //시간 보여줄때 옆에 날짜도 보여주는 기능\r\n    const date = new Date();\r\n    now = `${date.getMonth() + 1}-${date.getDate()}`;\r\n\r\n    //데스크 회의실 - 결제(후불) 버튼\r\n    const submit = async () => {\r\n      // post정보 확인\r\n      // console.log(\r\n      //   details.value.id,\r\n      //   startDateTime.value,\r\n      //   endDateTime.value,\r\n      //   nOfficePrice.value\r\n      // );\r\n      //  IMP.init(\"imp76177137\");\r\n      //   IMP.request_pay(\r\n      // {\r\n      //   pg: \"kakaopay.TCSUBSCRIP\",\r\n      //   pay_method: \"card\", // 기능 없음.\r\n      //   merchant_uid: `${requests.value}`, // 상점에서 관리하는 주문 번호\r\n      //   name: details.value.space.spaceName,\r\n      //   amount: details.value.space.price, // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\r\n      //   customer_uid: \"1\", // 필수 입력\r\n      //   buyer_email: \"iamport@siot.do\",\r\n      //   buyer_name: \"아임포트\",\r\n      //   buyer_tel: \"02-1234-1234\",\r\n      // }\r\n      try {\r\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n          spaceId: details.value.id,\r\n          memberId: localStorage.getItem(\"memberId\"),\r\n          startDate: startDateTime.value,\r\n          endDate: endDateTime.value,\r\n          price: nOfficePrice.value,\r\n        });\r\n      } catch (error) {\r\n        console.alert(\"error:\" + error);\r\n      }\r\n    };\r\n    //데스크 회의실 - 선불 버튼\r\n    const preSubmit = async () => {\r\n      try {\r\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n          spaceId: details.value.id,\r\n          memberId: localStorage.getItem(\"memberId\"),\r\n          startDate: startDateTime.value,\r\n          endDate: endDateTime.value,\r\n          price: nOfficePrice.value,\r\n          prepay: \"선결제\",\r\n        });\r\n      } catch (error) {\r\n        console.alert(\"error:\" + error);\r\n      }\r\n    };\r\n\r\n    //오피스 - 결제 버튼\r\n    const resSubmit = async () => {\r\n      try {\r\n        axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n          spaceID: details.value.id,\r\n          startDate: startDate.value,\r\n          endDate: endDate.value,\r\n          price: officePrice.value,\r\n        });\r\n      } catch (error) {\r\n        console.alert(\"error:\" + error);\r\n      }\r\n    };\r\n\r\n    // 하단 nav바 버튼들\r\n    const locClick = () => {\r\n      locClicked.value = !locClicked.value;\r\n      locationClicked.value = false;\r\n      reviewClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showLocation = () => {\r\n      locationClicked.value = !locationClicked.value;\r\n      locClicked.value = false;\r\n      reviewClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showReviews = () => {\r\n      reviewClicked.value = !reviewClicked.value;\r\n      locationClicked.value = false;\r\n      locClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showQna = () => {\r\n      qnaClicked.value = !qnaClicked.value;\r\n      locationClicked.value = false;\r\n      locClicked.value = false;\r\n      reviewClicked.value = false;\r\n    };\r\n\r\n    return {\r\n      details,\r\n      currentImg,\r\n      currentImgNum,\r\n      locClick,\r\n      locClicked,\r\n      locationClicked,\r\n      showLocation,\r\n      showReviews,\r\n      reviewClicked,\r\n      qnaClicked,\r\n      showQna,\r\n      changePic,\r\n      startDate,\r\n      date,\r\n      endDate,\r\n      resSubmit,\r\n      officePrice,\r\n      nOfficePrice,\r\n      startDateTime,\r\n      endDateTime,\r\n      submit,\r\n      num1,\r\n      num2,\r\n      errMessage,\r\n      now,\r\n      rentTimeCheck,\r\n      directChangePic,\r\n      rentOfficeCheck,\r\n      preSubmit,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n/* eslint-disable */\r\n<style scoped>\r\n.picsAndIntro {\r\n  left: 180px;\r\n  float: left;\r\n  position: absolute;\r\n}\r\n.res {\r\n  margin-top: 30px;\r\n  right: 180px;\r\n  /* float: right; */\r\n  position: absolute;\r\n  /* border: 1px solid gray; */\r\n  border-radius: 15px;\r\n}\r\n.detailNavDiv {\r\n  height: fit-content;\r\n  top: 1100px;\r\n  left: 180px;\r\n  float: left;\r\n  position: absolute;\r\n}\r\n.detailNav {\r\n  width: 850px;\r\n  height: 40px;\r\n  /* border-bottom: 1px solid silver; */\r\n}\r\n.form {\r\n  width: 900px;\r\n  height: 700px;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n.resForm {\r\n  width: 800px;\r\n  height: 500px;\r\n  margin: 90px;\r\n  margin-left: 80px;\r\n  text-align: center;\r\n}\r\n.navContainer {\r\n  width: 900px;\r\n  height: 200px;\r\n}\r\n.big {\r\n  width: 900px;\r\n  height: 600px;\r\n  position: relative;\r\n  margin: auto;\r\n  align-self: left;\r\n}\r\n.list {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n.shortInto,\r\n.lineIntro {\r\n  text-align: left;\r\n  font-size: 30px;\r\n}\r\nbutton {\r\n  width: 600px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  margin-right: 200px;\r\n}\r\n\r\niframe {\r\n  width: 700px;\r\n  height: 600px;\r\n}\r\n.nav {\r\n  display: inline-block;\r\n  font-size: 25px;\r\n  margin-right: 50px;\r\n  margin-left: 50px;\r\n  justify-content: space-evenly;\r\n}\r\n.hover:hover {\r\n  border-bottom: 1px solid blue;\r\n  color: blue;\r\n}\r\n.locClicked,\r\n.locationClicked {\r\n  margin-top: 20px;\r\n  font-size: 30px;\r\n}\r\n.reviews {\r\n  width: 850px;\r\n  font-size: 30px;\r\n  line-height: 2.5;\r\n  color: black;\r\n}\r\n.qnas {\r\n  width: 850px;\r\n  font-size: 30px;\r\n  line-height: 2.5;\r\n  color: black;\r\n}\r\n.chooseDate {\r\n  text-align: left;\r\n  font-size: 25px;\r\n  margin-bottom: 40px;\r\n}\r\n.calender {\r\n  width: 600px;\r\n  height: 70px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 80px;\r\n}\r\n.priceDiv {\r\n  width: 600px;\r\n  height: 70px;\r\n  font-size: 25px;\r\n  word-spacing: 160px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 80px;\r\n}\r\n.date {\r\n  margin-top: 10px;\r\n  border: 1px solid white;\r\n  font-size: 25px;\r\n}\r\n.time {\r\n  margin: none;\r\n  width: 100px;\r\n  margin-top: 20px;\r\n  border: 1px solid white;\r\n  font-size: 20px;\r\n}\r\n.price {\r\n  margin-top: 10px;\r\n}\r\n.payRule {\r\n  font-size: 20px;\r\n  margin-right: 300px;\r\n}\r\n.depositSubmit {\r\n  width: 300px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  margin-right: 20px;\r\n}\r\n.preSubmit {\r\n  width: 300px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  /* margin-left: px; */\r\n  margin-right: 20px;\r\n}\r\n.buttons {\r\n  width: 660px;\r\n  height: 70px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}