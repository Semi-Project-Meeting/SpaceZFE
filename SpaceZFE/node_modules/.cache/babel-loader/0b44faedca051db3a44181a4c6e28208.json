{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useRoute } from \"vue-router\";\nimport KaKaoMap from \"./KaKaoMapOne.vue\";\nexport default {\n  components: {\n    KaKaoMap\n  },\n  data() {\n    return {\n      mapOption: {\n        center: {\n          lat: 33.450701,\n          lng: 126.570667\n        },\n        level: 8,\n        location: null\n      }\n    };\n  },\n  mounted() {\n    fetch(\"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + useRoute().params.id + \"&memberId=\" + localStorage.getItem(\"memberId\")).then(res => res.json()).then(res => {\n      this.mapOption.location = res.space.location;\n    });\n  },\n  setup() {\n    const details = ref({\n      space: {},\n      reviews: [],\n      replys: [],\n      qnas: [],\n      avgRating: 0,\n      merchant_uid: \"\",\n      images: []\n    });\n\n    // const requests = ref([]);\n    const route = useRoute();\n    let officePrice = ref(0);\n    let nOfficePrice = ref(0);\n    let now = ref(\"\");\n    const num1 = ref();\n    const num2 = ref();\n\n    // const map = ref('')\n    const errMessage = ref(\"\");\n    const startDate = ref(\"\");\n    const endDate = ref(\"\");\n    const startDateTime = ref(\"\");\n    const endDateTime = ref(\"\");\n    const locClicked = ref(false);\n    const locationClicked = ref(false);\n    const reviewClicked = ref(false);\n    const qnaClicked = ref(false);\n    let currentImgNum = ref(0);\n    let currentImg = ref(\"\");\n\n    // refreshAll();\n\n    const getDetails = async () => {\n      const res = await axios.get(\"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + route.params.id + \"&memberId=\" + localStorage.getItem(\"memberId\"));\n      details.value = {\n        ...res.data\n      };\n      console.log(details.value);\n      // 지우면 안됌\n      currentImg.value = details.value.images[currentImgNum.value].imgName;\n      console.log(details.value.images[currentImgNum.value].imgName);\n    };\n    getDetails();\n    console.log(details.value);\n\n    //메인사진 클릭시 변경\n    const changePic = () => {\n      currentImgNum.value++;\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\n      console.log(currentImgNum.value);\n      if (currentImgNum.value === details.value.images.length) {\n        currentImgNum.value = 0;\n      }\n      console.log(currentImgNum.value);\n      currentImg.value = details.value.images[currentImgNum.value].imgName;\n    };\n\n    //사진 리스트 클릭시 해당 사진 변경\n    const directChangePic = e => {\n      console.log(e);\n    };\n\n    //오피스 대여 비용 계산기\n    const rentOfficeCheck = () => {\n      //반납일이 대여일보다 빠르면 오류 메세지 출력\n      if (endDate.value < startDate.value) {\n        errMessage.value = \"반납불가능한 시간 입니다\";\n        officePrice.value = 0;\n      } else {\n        errMessage.value = \"\";\n        let total;\n        //구한 날짜를 일수로 변환하는 함수\n        const getDateDiff = (d1, d2) => {\n          const date1 = new Date(d1);\n          const date2 = new Date(d2);\n          const diffDate = date1.getTime() - date2.getTime();\n          return Math.abs(diffDate / (1000 * 60 * 60 * 24));\n        };\n        //db에 저장한 공간의 대여로 곱하기 위에서 구한 일수\n        total = getDateDiff(endDate.value, startDate.value) * details.value.space.price;\n        //가시성 좋게 1000단위 마다 ,찍는 로직 추가\n        officePrice.value = total;\n        // .toString()\n        // .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n        console.log(officePrice.value);\n      }\n    };\n\n    //렌트 비용 계산기 대여시각보다 반납시각이 이르면 오류 메세지 출력\n    const rentTimeCheck = () => {\n      if (endDateTime.value < startDateTime.value) {\n        errMessage.value = \"반납불가능한 시간 입니다\";\n        nOfficePrice.value = 0;\n      } else {\n        let total;\n        errMessage.value = \"\";\n        total = (endDateTime.value - startDateTime.value) * details.value.space.price;\n        nOfficePrice.value = total;\n        // .toString()\n        // .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      }\n    };\n\n    //시간 보여줄때 옆에 날짜도 보여주는 기능\n    const date = new Date();\n    now = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\n\n    //데스크 회의실 - 보증금 버튼\n    const submit = async () => {\n      // post정보 확인\n      // console.log(\n      //   details.value.space.spaceId,\n      //   now + \"-\" + startDateTime.value + \":00\",\n      //   now + \"-\" + endDateTime.value + \":00\",\n      //   nOfficePrice.value\n      // );\n      IMP.init(\"imp76177137\");\n      IMP.request_pay({\n        pg: \"kakaopay.TCSUBSCRIP\",\n        pay_method: \"card\",\n        // 기능 없음.\n        merchant_uid: details.value.merchant_uid,\n        // 상점에서 관리하는 주문 번호\n        name: details.value.space.spaceName,\n        amount: details.value.space.price * 0.2,\n        // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\n        customer_uid: localStorage.getItem(\"memberId\"),\n        // 필수 입력\n        buyer_email: \"\",\n        buyer_name: \"\",\n        buyer_tel: \"\"\n      }, function (rsp) {\n        if (rsp.success) axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          imp_uid: rsp.imp_uid,\n          prepay_uid: rsp.merchant_uid,\n          memberId: parseInt(localStorage.getItem(\"memberId\")),\n          companyId: details.value.space.companyId,\n          payStatus: \"003\",\n          price: nOfficePrice.value,\n          prepay: \"002\",\n          spaceId: details.value.space.spaceId,\n          startDate: now + \" \" + startDateTime.value + \":00\",\n          endDate: now + \" \" + endDateTime.value + \":00\"\n        });\n      });\n    };\n    //데스크 회의실 - 선불 버튼\n    const preSubmit = async () => {\n      IMP.init(\"imp76177137\");\n      IMP.request_pay({\n        pg: \"kakaopay.TC0ONETIME\",\n        pay_method: \"card\",\n        // 기능 없음.\n        merchant_uid: details.value.merchant_uid,\n        // 상점에서 관리하는 주문 번호\n        name: details.value.space.spaceName,\n        amount: details.value.space.price,\n        // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\n        customer_uid: localStorage.getItem(\"memberId\"),\n        // 필수 입력\n        buyer_email: \"\",\n        buyer_name: \"\",\n        buyer_tel: \"\"\n      }, function (rsp) {\n        if (rsp.success) axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          imp_uid: rsp.imp_uid,\n          prepay_uid: rsp.merchant_uid,\n          memberId: parseInt(localStorage.getItem(\"memberId\")),\n          companyId: details.value.space.companyId,\n          payStatus: \"002\",\n          price: nOfficePrice.value,\n          prepay: \"000\",\n          spaceId: details.value.space.spaceId,\n          startDate: now + \" \" + startDateTime.value + \":00\",\n          endDate: now + \" \" + endDateTime.value + \":00\"\n        });\n      });\n    };\n\n    //오피스 - 결제 버튼\n    const resSubmit = async () => {\n      IMP.init(\"imp76177137\");\n      IMP.request_pay({\n        pg: \"kakaopay.TCSUBSCRIP\",\n        pay_method: \"card\",\n        // 기능 없음.\n        merchant_uid: details.value.merchant_uid,\n        // 상점에서 관리하는 주문 번호\n        name: details.value.space.spaceName,\n        amount: 0,\n        // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\n        customer_uid: localStorage.getItem(\"memberId\"),\n        // 필수 입력\n        buyer_email: \"\",\n        buyer_name: \"\",\n        buyer_tel: \"\"\n      }, function (rsp) {\n        console.log(officePrice.value);\n        if (rsp.success) axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\n          imp_uid: rsp.imp_uid,\n          prepay_uid: rsp.merchant_uid,\n          memberId: parseInt(localStorage.getItem(\"memberId\")),\n          companyId: details.value.space.companyId,\n          payStatus: \"001\",\n          price: officePrice.value,\n          prepay: \"002\",\n          spaceId: details.value.space.spaceId,\n          startDate: startDate.value + \" \" + \"00:00\",\n          endDate: endDate.value + \" \" + \"23:59\"\n        });\n      });\n    };\n\n    // 하단 nav바 버튼들\n    const locClick = () => {\n      locClicked.value = !locClicked.value;\n      locationClicked.value = false;\n      reviewClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showLocation = () => {\n      locationClicked.value = !locationClicked.value;\n      locClicked.value = false;\n      reviewClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showReviews = () => {\n      reviewClicked.value = !reviewClicked.value;\n      locationClicked.value = false;\n      locClicked.value = false;\n      qnaClicked.value = false;\n    };\n    const showQna = () => {\n      qnaClicked.value = !qnaClicked.value;\n      locationClicked.value = false;\n      locClicked.value = false;\n      reviewClicked.value = false;\n    };\n\n    //마일리지 사용 버튼\n    const useMileage = ref(false);\n    const changeMileageState = () => {\n      if (useMileage.value === false) {\n        useMileage.value = true;\n      } else {\n        useMileage.value = false;\n      }\n    };\n    return {\n      details,\n      currentImg,\n      currentImgNum,\n      locClick,\n      locClicked,\n      locationClicked,\n      showLocation,\n      showReviews,\n      reviewClicked,\n      qnaClicked,\n      showQna,\n      changePic,\n      startDate,\n      date,\n      endDate,\n      resSubmit,\n      officePrice,\n      nOfficePrice,\n      startDateTime,\n      endDateTime,\n      submit,\n      num1,\n      num2,\n      errMessage,\n      now,\n      rentTimeCheck,\n      directChangePic,\n      rentOfficeCheck,\n      preSubmit,\n      useMileage,\n      changeMileageState\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","axios","useRoute","KaKaoMap","components","data","mapOption","center","lat","lng","level","location","mounted","fetch","params","id","localStorage","getItem","then","res","json","space","setup","details","reviews","replys","qnas","avgRating","merchant_uid","images","route","officePrice","nOfficePrice","now","num1","num2","errMessage","startDate","endDate","startDateTime","endDateTime","locClicked","locationClicked","reviewClicked","qnaClicked","currentImgNum","currentImg","getDetails","get","value","console","log","imgName","changePic","length","directChangePic","e","rentOfficeCheck","total","getDateDiff","d1","d2","date1","Date","date2","diffDate","getTime","Math","abs","price","rentTimeCheck","date","getFullYear","getMonth","getDate","submit","IMP","init","request_pay","pg","pay_method","name","spaceName","amount","customer_uid","buyer_email","buyer_name","buyer_tel","rsp","success","post","imp_uid","prepay_uid","memberId","parseInt","companyId","payStatus","prepay","spaceId","preSubmit","resSubmit","locClick","showLocation","showReviews","showQna","useMileage","changeMileageState"],"sourceRoot":"","sources":["C:\\Users\\qwe17\\golfzon\\vue_prac\\SpaceZFE-1\\SpaceZFE\\src\\components\\Details.vue"],"sourcesContent":["// eslint-disable-next-line\r\n<template>\r\n  <div>\r\n    <div class=\"picsAndIntro\">\r\n      <div class=\"form\">\r\n        <p class=\"lineIntro\">{{ details.space.spaceName }}</p>\r\n        <br />\r\n        <p class=\"shortInto\">{{ details.space.info }}</p>\r\n        <div class=\"img\">\r\n          <img\r\n            class=\"big\"\r\n            name=\"big\"\r\n            :src=\"`http://localhost:8090/spaceZBE/resources/upload/${currentImg}`\"\r\n            @click=\"changePic\"\r\n          />\r\n          <!-- details.imgs[currentImgNum].img -->\r\n          <br />\r\n\r\n          <img\r\n            class=\"list\"\r\n            v-for=\"name in details.imgs\"\r\n            :key=\"name.id\"\r\n            :src=\"name.img\"\r\n            @click=\"directChangePic\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"res\">\r\n      <div class=\"resForm\">\r\n        <div v-if=\"details.space.type == 'office'\">\r\n          <p class=\"chooseDate\">날짜 선택</p>\r\n          <div class=\"calender\">\r\n            <input\r\n              class=\"date\"\r\n              type=\"date\"\r\n              v-model=\"startDate\"\r\n              style=\"margin-right: 20px\"\r\n            />\r\n            <span style=\"font-size: 25px\">-</span>\r\n            <input\r\n              class=\"date\"\r\n              type=\"date\"\r\n              v-model=\"endDate\"\r\n              style=\"margin-left: 20px\"\r\n              @change=\"rentOfficeCheck\"\r\n            />\r\n          </div>\r\n          <p>{{ errMessage }}</p>\r\n          <div class=\"priceDiv\">\r\n            <p class=\"price\">\r\n              가격\r\n              <!-- <input type=\"number\" v-model=\"officePrice\" /> -->\r\n              {{ officePrice }}\r\n              원\r\n            </p>\r\n          </div>\r\n          <div class=\"mileageDiv\">\r\n            <p class=\"price\" style=\"margin-left:20px;\">마일리지사용</p>\r\n            <input class=\"mileage\" type=\"number\" min=\"1\">\r\n            <button v-show=\"!useMileage\" class=\"mileageBtn\" @click=\"changeMileageState\">사용</button>\r\n            <button v-show=\"useMileage\" class=\"mileageBtn\" @click=\"changeMileageState\"></button>\r\n          </div>\r\n          <div>\r\n            <p class=\"possibleMileage\">사용가능한 마일리지: {{ details.total_score }}점</p>\r\n          </div>\r\n          <p class=\"payRule\">\r\n            &#8251;오피스 예약은 후불제이며 선결제가 불가능합니다&#8251;\r\n          </p>\r\n          <button @click=\"resSubmit\">예약하기</button>\r\n        </div>\r\n        <div v-if=\"details.space.type !== 'office'\">\r\n          <p class=\"chooseDate\">날짜 및 시간 선택</p>\r\n          <div class=\"calender\">\r\n            <label style=\"font-size: 20px\">대여시각: {{ now }}-</label>\r\n            <select\r\n              class=\"time\"\r\n              v-model=\"startDateTime\"\r\n              style=\"margin-right: 10px\"\r\n            >\r\n              <option v-for=\"num1 in 24\" :key=\"num1.id\" :value=\"num1\">\r\n                {{ num1 }}시\r\n              </option>\r\n            </select>\r\n            <label style=\"margin-left: 5px; font-size: 20px\">반납시각:{{ now }}-</label>\r\n            <select\r\n              class=\"time\"\r\n              v-model=\"endDateTime\"\r\n              style=\"margin-right: 20px\"\r\n              @change=\"rentTimeCheck\"\r\n            >\r\n              <option v-for=\"num2 in 24\" :key=\"num2.id\" :value=\"num2\">\r\n                {{ num2 }}시\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <p>{{ errMessage }}</p>\r\n          <div class=\"priceDiv\">\r\n            <p class=\"price\">가격 {{ nOfficePrice }}원</p>\r\n          </div>\r\n          <div class=\"mileageDiv\">\r\n            <p class=\"price\" style=\"margin-left:20px;\">마일리지사용</p>\r\n            <input class=\"mileage\" type=\"number\" min=\"1\">\r\n            <button v-show=\"\" class=\"mileageBtn\">사용</button>\r\n          </div>\r\n          <div>\r\n            <p class=\"possibleMileage\">사용가능한 마일리지: {{ details.total_score }}점</p>\r\n          </div>\r\n          <p class=\"payRule\">\r\n            &#8251;선결제 예약 시 보증금을 포함한 전 금액을 지불하고, 결재금액의\r\n            5%가 적립됩니다. 보증금으로 예약시 전 금액의 20%가 결제됩니다&#8251;\r\n          </p>\r\n          <div class=\"buttons\">\r\n            <button class=\"preSubmit\" @click=\"preSubmit\">\r\n              선결제로 예약하기\r\n            </button>\r\n            <button class=\"depositSubmit\" @click=\"submit\">\r\n              보증금으로 예약하기\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"detailNavDiv\">\r\n      <nav class=\"detailNav\">\r\n        <ul class=\"nav\" @click=\"locClick\">\r\n          <p class=\"hover\" v-if=\"!locClicked\">장소 소개</p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"locClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            장소 소개\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showLocation\">\r\n          <p class=\"hover\" v-if=\"!locationClicked\">장소 위치</p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"locationClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            장소 위치\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showReviews\">\r\n          <p class=\"hover\" v-if=\"!reviewClicked\">\r\n            리뷰\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.reviews.length\r\n            }}</a>\r\n          </p>\r\n\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"reviewClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            리뷰\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.reviews.length\r\n            }}</a>\r\n          </p>\r\n        </ul>\r\n        <ul class=\"nav\" @click=\"showQna\">\r\n          <p class=\"hover\" v-if=\"!qnaClicked\">\r\n            Q&A\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.qnas.length\r\n            }}</a>\r\n          </p>\r\n          <p\r\n            class=\"hover\"\r\n            v-if=\"qnaClicked\"\r\n            style=\"color: blue; border-bottom: 1px solid blue\"\r\n          >\r\n            Q&A\r\n            <a style=\"opacity: 0.6; margin-left: 10px\">{{\r\n              details.qnas.length\r\n            }}</a>\r\n          </p>\r\n        </ul>\r\n      </nav>\r\n      <div class=\"navContainer\">\r\n        <div class=\"locClicked\" v-show=\"locClicked\">\r\n          {{ details.space.moreInfo }}\r\n        </div>\r\n        <div class=\"locationClicked\" v-if=\"locationClicked\">\r\n          <KaKaoMap class=\"map\" :options=\"mapOption\" />\r\n        </div>\r\n        <div class=\"reviewClicked\" v-show=\"reviewClicked\">\r\n          <div style=\"margin-top: 20px\">\r\n            <a class=\"reviews\" v-for=\"num in details.reviews\" :key=\"num\">\r\n              평점 : ⭐ {{ num.rating }} <br />\r\n              {{ num.content }} {{ num.reviewDate }}\r\n              <!-- {{ num.reviewer }} {{ num.starRating }} <br />\r\n              {{ num.reviewContent }} <br /> -->\r\n              <hr />\r\n            </a>\r\n          </div>\r\n        </div>\r\n        <div class=\"qnaClicked\" v-show=\"qnaClicked\">\r\n          <div style=\"margin-top: 20px\">\r\n            <a class=\"qnas\" v-for=\"num in details.qnas\" :key=\"num\">\r\n              질문자:{{ num.memberId }} <br />\r\n              내용:{{ num.content }} <br />\r\n              답변:{{ num.title }} <br />\r\n              <hr />\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRoute } from \"vue-router\";\r\nimport KaKaoMap from \"./KaKaoMapOne.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    KaKaoMap,\r\n  },\r\n  data() {\r\n    return {\r\n      mapOption: {\r\n        center: {\r\n          lat: 33.450701,\r\n          lng: 126.570667,\r\n        },\r\n        level: 8,\r\n        location: null,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    fetch(\r\n      \"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + useRoute().params.id + \"&memberId=\"+ localStorage.getItem(\"memberId\")\r\n    )\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        this.mapOption.location = res.space.location;\r\n      });\r\n  },\r\n  setup() {\r\n    const details = ref({\r\n      space: {},\r\n      reviews: [],\r\n      replys: [],\r\n      qnas: [],\r\n      avgRating: 0,\r\n      merchant_uid: \"\",\r\n      images: [],\r\n    });\r\n\r\n    // const requests = ref([]);\r\n    const route = useRoute();\r\n    let officePrice = ref(0);\r\n    let nOfficePrice = ref(0);\r\n\r\n    let now = ref(\"\");\r\n\r\n    const num1 = ref();\r\n    const num2 = ref();\r\n\r\n    // const map = ref('')\r\n    const errMessage = ref(\"\");\r\n    const startDate = ref(\"\");\r\n    const endDate = ref(\"\");\r\n    const startDateTime = ref(\"\");\r\n    const endDateTime = ref(\"\");\r\n    const locClicked = ref(false);\r\n    const locationClicked = ref(false);\r\n    const reviewClicked = ref(false);\r\n    const qnaClicked = ref(false);\r\n\r\n    let currentImgNum = ref(0);\r\n    let currentImg = ref(\"\");\r\n\r\n    // refreshAll();\r\n\r\n    const getDetails = async () => {\r\n      const res = await axios.get(\r\n        \"http://localhost:8090/spaceZBE/spaceInfo?spaceId=\" + route.params.id + \"&memberId=\"+ localStorage.getItem(\"memberId\")\r\n      );\r\n      details.value = { ...res.data };\r\n      console.log(details.value);\r\n      // 지우면 안됌\r\n      currentImg.value = details.value.images[currentImgNum.value].imgName;\r\n      console.log(details.value.images[currentImgNum.value].imgName);\r\n    };\r\n    getDetails();\r\n\r\n    console.log(details.value);\r\n\r\n    //메인사진 클릭시 변경\r\n    const changePic = () => {\r\n      currentImgNum.value++;\r\n      // currentImg.value = details.value.imgs[currentImgNum.value].img;\r\n      console.log(currentImgNum.value);\r\n      if (currentImgNum.value === details.value.images.length) {\r\n        currentImgNum.value = 0;\r\n      }\r\n      console.log(currentImgNum.value);\r\n      currentImg.value = details.value.images[currentImgNum.value].imgName;\r\n    };\r\n\r\n    //사진 리스트 클릭시 해당 사진 변경\r\n    const directChangePic = (e) => {\r\n      console.log(e);\r\n    };\r\n\r\n    //오피스 대여 비용 계산기\r\n    const rentOfficeCheck = () => {\r\n      //반납일이 대여일보다 빠르면 오류 메세지 출력\r\n      if (endDate.value < startDate.value) {\r\n        errMessage.value = \"반납불가능한 시간 입니다\";\r\n        officePrice.value = 0;\r\n      } else {\r\n        errMessage.value = \"\";\r\n        let total;\r\n        //구한 날짜를 일수로 변환하는 함수\r\n        const getDateDiff = (d1, d2) => {\r\n          const date1 = new Date(d1);\r\n          const date2 = new Date(d2);\r\n          const diffDate = date1.getTime() - date2.getTime();\r\n          return Math.abs(diffDate / (1000 * 60 * 60 * 24));\r\n        };\r\n        //db에 저장한 공간의 대여로 곱하기 위에서 구한 일수\r\n        total =\r\n          getDateDiff(endDate.value, startDate.value) *\r\n          details.value.space.price;\r\n        //가시성 좋게 1000단위 마다 ,찍는 로직 추가\r\n        officePrice.value = total;\r\n        // .toString()\r\n        // .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        console.log(officePrice.value);\r\n      }\r\n    };\r\n\r\n    //렌트 비용 계산기 대여시각보다 반납시각이 이르면 오류 메세지 출력\r\n    const rentTimeCheck = () => {\r\n      if (endDateTime.value < startDateTime.value) {\r\n        errMessage.value = \"반납불가능한 시간 입니다\";\r\n        nOfficePrice.value = 0;\r\n      } else {\r\n        let total;\r\n        errMessage.value = \"\";\r\n        total =\r\n          (endDateTime.value - startDateTime.value) * details.value.space.price;\r\n        nOfficePrice.value = total;\r\n        // .toString()\r\n        // .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n      }\r\n    };\r\n\r\n    //시간 보여줄때 옆에 날짜도 보여주는 기능\r\n    const date = new Date();\r\n    now = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;\r\n\r\n    //데스크 회의실 - 보증금 버튼\r\n    const submit = async () => {\r\n      // post정보 확인\r\n      // console.log(\r\n      //   details.value.space.spaceId,\r\n      //   now + \"-\" + startDateTime.value + \":00\",\r\n      //   now + \"-\" + endDateTime.value + \":00\",\r\n      //   nOfficePrice.value\r\n      // );\r\n      IMP.init(\"imp76177137\");\r\n      IMP.request_pay(\r\n        {\r\n          pg: \"kakaopay.TCSUBSCRIP\",\r\n          pay_method: \"card\", // 기능 없음.\r\n          merchant_uid: details.value.merchant_uid, // 상점에서 관리하는 주문 번호\r\n          name: details.value.space.spaceName,\r\n          amount: details.value.space.price * 0.2, // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\r\n          customer_uid: localStorage.getItem(\"memberId\"), // 필수 입력\r\n          buyer_email: \"\",\r\n          buyer_name: \"\",\r\n          buyer_tel: \"\",\r\n        },\r\n        function (rsp) {\r\n          if (rsp.success)\r\n            axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n              imp_uid: rsp.imp_uid,\r\n              prepay_uid: rsp.merchant_uid,\r\n              memberId: parseInt(localStorage.getItem(\"memberId\")),\r\n              companyId: details.value.space.companyId,\r\n              payStatus: \"003\",\r\n              price: nOfficePrice.value,\r\n              prepay: \"002\",\r\n              spaceId: details.value.space.spaceId,\r\n              startDate: now + \" \" + startDateTime.value + \":00\",\r\n              endDate: now + \" \" + endDateTime.value + \":00\",\r\n            });\r\n        }\r\n      );\r\n    };\r\n    //데스크 회의실 - 선불 버튼\r\n    const preSubmit = async () => {\r\n      IMP.init(\"imp76177137\");\r\n      IMP.request_pay(\r\n        {\r\n          pg: \"kakaopay.TC0ONETIME\",\r\n          pay_method: \"card\", // 기능 없음.\r\n          merchant_uid: details.value.merchant_uid, // 상점에서 관리하는 주문 번호\r\n          name: details.value.space.spaceName,\r\n          amount: details.value.space.price, // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\r\n          customer_uid: localStorage.getItem(\"memberId\"), // 필수 입력\r\n          buyer_email: \"\",\r\n          buyer_name: \"\",\r\n          buyer_tel: \"\",\r\n        },\r\n        function (rsp) {\r\n          if (rsp.success)\r\n            axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n              imp_uid: rsp.imp_uid,\r\n              prepay_uid: rsp.merchant_uid,\r\n              memberId: parseInt(localStorage.getItem(\"memberId\")),\r\n              companyId: details.value.space.companyId,\r\n              payStatus: \"002\",\r\n              price: nOfficePrice.value,\r\n              prepay: \"000\",\r\n              spaceId: details.value.space.spaceId,\r\n              startDate: now + \" \" + startDateTime.value + \":00\",\r\n              endDate: now + \" \" + endDateTime.value + \":00\",\r\n            });\r\n        }\r\n      );\r\n    };\r\n\r\n    //오피스 - 결제 버튼\r\n    const resSubmit = async () => {\r\n      IMP.init(\"imp76177137\");\r\n      IMP.request_pay(\r\n        {\r\n          pg: \"kakaopay.TCSUBSCRIP\",\r\n          pay_method: \"card\", // 기능 없음.\r\n          merchant_uid: details.value.merchant_uid, // 상점에서 관리하는 주문 번호\r\n          name: details.value.space.spaceName,\r\n          amount: 0, // 빌링키 발급과 함께 40원 결제승인을 시도합니다. price의 20%만 계산해서 넣는다. //후결제인 경우, 0으로 넣는다.\r\n          customer_uid: localStorage.getItem(\"memberId\"), // 필수 입력\r\n          buyer_email: \"\",\r\n          buyer_name: \"\",\r\n          buyer_tel: \"\",\r\n        },\r\n        function (rsp) {\r\n          console.log(officePrice.value);\r\n          if (rsp.success)\r\n            axios.post(\"http://localhost:8090/spaceZBE/reserve/insert\", {\r\n              imp_uid: rsp.imp_uid,\r\n              prepay_uid: rsp.merchant_uid,\r\n              memberId: parseInt(localStorage.getItem(\"memberId\")),\r\n              companyId: details.value.space.companyId,\r\n              payStatus: \"001\",\r\n              price: officePrice.value,\r\n              prepay: \"002\",\r\n              spaceId: details.value.space.spaceId,\r\n              startDate: startDate.value + \" \" + \"00:00\",\r\n              endDate: endDate.value + \" \" + \"23:59\",\r\n            });\r\n        }\r\n      );\r\n    };\r\n\r\n    // 하단 nav바 버튼들\r\n    const locClick = () => {\r\n      locClicked.value = !locClicked.value;\r\n      locationClicked.value = false;\r\n      reviewClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showLocation = () => {\r\n      locationClicked.value = !locationClicked.value;\r\n      locClicked.value = false;\r\n      reviewClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showReviews = () => {\r\n      reviewClicked.value = !reviewClicked.value;\r\n      locationClicked.value = false;\r\n      locClicked.value = false;\r\n      qnaClicked.value = false;\r\n    };\r\n\r\n    const showQna = () => {\r\n      qnaClicked.value = !qnaClicked.value;\r\n      locationClicked.value = false;\r\n      locClicked.value = false;\r\n      reviewClicked.value = false;\r\n    };\r\n\r\n    //마일리지 사용 버튼\r\n    const useMileage = ref(false);\r\n\r\n    const changeMileageState = () => {\r\n      if(useMileage.value === false){\r\n        useMileage.value = true;\r\n      } else{\r\n        useMileage.value = false;\r\n      }\r\n    };\r\n    \r\n\r\n    return {\r\n      details,\r\n      currentImg,\r\n      currentImgNum,\r\n      locClick,\r\n      locClicked,\r\n      locationClicked,\r\n      showLocation,\r\n      showReviews,\r\n      reviewClicked,\r\n      qnaClicked,\r\n      showQna,\r\n      changePic,\r\n      startDate,\r\n      date,\r\n      endDate,\r\n      resSubmit,\r\n      officePrice,\r\n      nOfficePrice,\r\n      startDateTime,\r\n      endDateTime,\r\n      submit,\r\n      num1,\r\n      num2,\r\n      errMessage,\r\n      now,\r\n      rentTimeCheck,\r\n      directChangePic,\r\n      rentOfficeCheck,\r\n      preSubmit,\r\n      useMileage,\r\n      changeMileageState,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n/* eslint-disable */\r\n<style scoped>\r\n.picsAndIntro {\r\n  left: 180px;\r\n  float: left;\r\n  position: absolute;\r\n}\r\n.res {\r\n  margin-top: 30px;\r\n  right: 180px;\r\n  /* float: right; */\r\n  position: absolute;\r\n  /* border: 1px solid gray; */\r\n  border-radius: 15px;\r\n}\r\n.detailNavDiv {\r\n  height: fit-content;\r\n  top: 1100px;\r\n  left: 180px;\r\n  float: left;\r\n  position: absolute;\r\n}\r\n.detailNav {\r\n  width: 850px;\r\n  height: 40px;\r\n  /* border-bottom: 1px solid silver; */\r\n}\r\n.form {\r\n  width: 900px;\r\n  height: 700px;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n.resForm {\r\n  width: 800px;\r\n  height: 500px;\r\n  margin: 90px;\r\n  margin-left: 80px;\r\n  text-align: center;\r\n}\r\n.navContainer {\r\n  width: 900px;\r\n  height: 200px;\r\n}\r\n.big {\r\n  width: 900px;\r\n  height: 600px;\r\n  position: relative;\r\n  margin: auto;\r\n  align-self: left;\r\n}\r\n.list {\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n.shortInto,\r\n.lineIntro {\r\n  text-align: left;\r\n  font-size: 30px;\r\n}\r\nbutton {\r\n  width: 600px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  margin-right: 200px;\r\n}\r\n.mileageBtn {\r\n  width: 80px;\r\n  height: 50px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  margin: 8px 0px 0px -100px;\r\n}\r\n\r\niframe {\r\n  width: 700px;\r\n  height: 600px;\r\n}\r\n.nav {\r\n  display: inline-block;\r\n  font-size: 25px;\r\n  margin-right: 50px;\r\n  margin-left: 50px;\r\n  justify-content: space-evenly;\r\n}\r\n.hover:hover {\r\n  border-bottom: 1px solid blue;\r\n  color: blue;\r\n}\r\n.locClicked,\r\n.locationClicked {\r\n  margin-top: 20px;\r\n  font-size: 30px;\r\n}\r\n.reviews {\r\n  width: 850px;\r\n  font-size: 30px;\r\n  line-height: 2.5;\r\n  color: black;\r\n}\r\n.qnas {\r\n  width: 850px;\r\n  font-size: 30px;\r\n  line-height: 2.5;\r\n  color: black;\r\n}\r\n.chooseDate {\r\n  text-align: left;\r\n  font-size: 25px;\r\n  margin-bottom: 40px;\r\n}\r\n.calender {\r\n  width: 600px;\r\n  height: 70px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 80px;\r\n}\r\n.priceDiv {\r\n  width: 600px;\r\n  height: 70px;\r\n  font-size: 25px;\r\n  word-spacing: 160px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 80px;\r\n}\r\n.mileageDiv {\r\n  width: 600px;\r\n  height: 70px;\r\n  font-size: 25px;\r\n  word-spacing: 160px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 80px;\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n.date {\r\n  margin-top: 10px;\r\n  border: 1px solid white;\r\n  font-size: 25px;\r\n}\r\n.time {\r\n  margin: none;\r\n  width: 70px;\r\n  margin-top: 20px;\r\n  border: 1px solid white;\r\n  font-size: 20px;\r\n}\r\n.price {\r\n  margin-top: 10px;\r\n}\r\n.possibleMileage {\r\n  font-size: 20px;\r\n  font-weight: 700;\r\n  margin: -70px 0px 30px 130px;\r\n}\r\n.mileage{\r\n  width: 100px;\r\n  height: 50px;\r\n  margin: 8px 0px 0px 0px;\r\n  border-radius: 10px;\r\n  border : 1px solid \t#B9BBB6;\r\n}\r\n.payRule {\r\n  font-size: 20px;\r\n  margin-right: 190px;\r\n  margin-bottom: 20px;\r\n}\r\n.depositSubmit {\r\n  width: 300px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  margin-right: 40px;\r\n}\r\n.preSubmit {\r\n  width: 300px;\r\n  height: 70px;\r\n  border-radius: 20px;\r\n  font-size: 25px;\r\n  border: 1px solid skyblue;\r\n  background: skyblue;\r\n  color: blue;\r\n  /* margin-left: px; */\r\n  margin-right: 20px;\r\n}\r\n.buttons {\r\n  width: 660px;\r\n  height: 70px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}