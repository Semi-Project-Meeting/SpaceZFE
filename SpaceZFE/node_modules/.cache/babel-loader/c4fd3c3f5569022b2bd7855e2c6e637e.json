{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"kakaoMap\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1);\n}","map":{"version":3,"mappings":";;EACSA,EAAE,EAAC;AAAU;;uBAAlBC,oBAAyB,OAAzBC,UAAyB","names":["id","_createElementBlock","_hoisted_1"],"sourceRoot":"","sources":["C:\\Users\\qwe17\\golfzon\\vue_prac\\SpaceZFE-1\\SpaceZFE\\src\\components\\KaKaoMapAll.vue"],"sourcesContent":["<template>\r\n    <div id=\"kakaoMap\"></div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    props: [\"options\"],\r\n    name: \"app\",\r\n    data() {\r\n      return {\r\n        map: null,\r\n      };\r\n    },\r\n    mounted() {\r\n      this.initMap();\r\n      this.searchSubmit();\r\n    },\r\n    methods: {\r\n      initMap() {\r\n        let container = document.getElementById(\"kakaoMap\");\r\n        let options = {\r\n          center: new kakao.maps.LatLng(37.566826, 126.9786567),\r\n          level: 3,\r\n        };\r\n  \r\n        let map = new kakao.maps.Map(container, options);\r\n  \r\n        this.map = map;\r\n  \r\n        this.geocoder = new kakao.maps.services.Geocoder();\r\n\r\n        this.overlay = new kakao.maps.CustomOverlay();\r\n      },\r\n      searchSubmit() {\r\n        const { vos } = this.options;\r\n        console.log(vos);\r\n\r\n        for(var i = 0; i < vos.length; i++) {\r\n            let spaceId = vos[i].spaceId;\r\n            let spaceName = vos[i].spaceName;\r\n            let typeName = vos[i].type;\r\n            let priceNum = vos[i].price;\r\n            let imgName = vos[i].imgName;\r\n            var bounds = new kakao.maps.LatLngBounds();\r\n            this.geocoder.addressSearch(vos[i].location, (result, status) => {\r\n                if (status === kakao.maps.services.Status.OK) {\r\n                    var coords = new kakao.maps.LatLng(result[0].y, result[0].x);\r\n                    var imageSrc = \"https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png\";\r\n                    var imageSize = new kakao.maps.Size(24, 35);\r\n                    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);\r\n\r\n                    var marker = new kakao.maps.Marker({\r\n                        map: this.map,\r\n                        position: coords,\r\n                        title: spaceName,\r\n                        image: markerImage,\r\n                        clickable: true\r\n\t\t                });\r\n\r\n                    var type = document.createElement('div');\r\n                    type.className = 'type';\r\n                    var typeValue = null;\r\n                    if(typeName == 'office') {\r\n                        typeValue = document.createTextNode('오피스');\r\n                    } else if(typeName == 'desk') {\r\n                        typeValue = document.createTextNode('데스크');\r\n                    } else {\r\n                        typeValue = document.createTextNode('회의실');\r\n                    }\r\n                    type.appendChild(typeValue);\r\n                    \r\n                    var price = document.createElement('div');\r\n                    price.className = 'price';\r\n                    var priceValue = null;\r\n                    if(typeName == 'office') {\r\n                        priceValue = document.createTextNode(priceNum + '원 / 시간');\r\n                    } else {\r\n                        priceValue = document.createTextNode(priceNum + '원 / 일');\r\n                    }\r\n                    price.appendChild(priceValue);\r\n                    \r\n                    var linkDiv = document.createElement('div');\r\n                    var linkA = document.createElement('a');\r\n                    linkA.href = '../detail/' + spaceId;\r\n                    linkA.target = '_self';\r\n                    linkA.className = 'link';\r\n                    linkA.appendChild(document.createTextNode('장소 상세보기'));\r\n                    linkDiv.appendChild(linkA);\r\n\r\n                    var desc = document.createElement('div');\r\n                    desc.className = 'desc';\r\n                    desc.appendChild(type);\r\n                    desc.appendChild(price);\r\n                    desc.appendChild(linkDiv);\r\n                    \r\n                    var img = document.createElement('div');\r\n                    img.className = 'img';\r\n                    var imgTag = document.createElement('img');\r\n                    imgTag.src = \"http://localhost:8090/spaceZBE/resources/upload/\" + imgName;\r\n                    imgTag.style.width = '73px';\r\n                    imgTag.style.height = '70px';\r\n                    img.appendChild(imgTag);\r\n\r\n                    var body = document.createElement('div');\r\n                    body.className = 'body';\r\n                    body.appendChild(img);\r\n                    body.appendChild(desc);\r\n                    \r\n                    var title = document.createElement('div');\r\n                    title.className = 'title';\r\n                    var titleValue = document.createTextNode(spaceName);\r\n                    title.appendChild(titleValue);\r\n                    \r\n                    var closeBtn = document.createElement('div');\r\n                    closeBtn.className = 'close';\r\n                    title.appendChild(closeBtn);\r\n\r\n                    var info = document.createElement('div');\r\n                    info.className = 'info';\r\n                    info.appendChild(title);\r\n                    info.appendChild(body);\r\n                    \r\n                    var overlayContent = document.createElement('div');\r\n                    overlayContent.className = 'wrap';\r\n                    overlayContent.appendChild(info);\r\n                    \r\n                    img.appendChild(imgTag);\r\n                    body.appendChild(img);\r\n                    \r\n                    info.appendChild(body);\r\n                    overlayContent.appendChild(info);\r\n                    \r\n                    // this.overlay.setMap(this.map);\r\n                    // this.overlay.setPosition(marker.getPosition());\r\n                    // this.overlay(() => {\r\n                    //     map: this.map,\r\n                    //     position: marker.getPosition()\r\n                    // });\r\n                    // var overlay = new kakao.maps.CustomOverlay({    \r\n                    // });\r\n                    var overlay = new kakao.maps.CustomOverlay({\r\n                        map: this.map,\r\n                        position: marker.getPosition(),\r\n                        content: null,\r\n                    });\r\n                    overlay.setContent(overlayContent);\r\n                  \r\n                    overlay.setMap(this.map);\r\n                    \r\n                    // 마커를 클릭했을 때 커스텀 오버레이를 표시합니다\r\n                    kakao.maps.event.addListener(marker, 'click', () => {\r\n                      overlayContent.style.display=\"block\";\r\n                    });\r\n                    \r\n                    closeBtn.onclick = function() {\r\n                      overlayContent.style.display=\"none\";\r\n                        // overlay.setMap(null);\r\n                    }\r\n\r\n                    // 인포윈도우로 장소에 대한 설명을 표시합니다\r\n                    let infowindow = new kakao.maps.InfoWindow({\r\n                        content: '<div style=\"width:150px;text-align:center;padding:6px 0;font-size:13px;\">' + spaceName +'</div>'\r\n                    });\r\n\r\n                    infowindow.open(this.map, marker);\r\n                    bounds.extend(coords);\r\n                }\r\n                this.map.setBounds(bounds);\r\n            });\r\n        }\r\n\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n  <style>\r\n  #kakaoMap {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.wrap {display:none;position: absolute;left: 0;bottom: 40px;width: 288px;height: 132px;margin-left: -144px;text-align: left;overflow: hidden;font-size: 12px;font-family: 'Malgun Gothic', dotum, '돋움', sans-serif;line-height: 1.5;}\r\n    .wrap * {padding: 0;margin: 0;}\r\n    .wrap .info {width: 286px;height: 120px;border-radius: 5px;border-bottom: 2px solid #ccc;border-right: 1px solid #ccc;overflow: hidden;background: #fff;}\r\n    .wrap .info:nth-child(1) {border: 0;box-shadow: 0px 1px 2px #888;}\r\n    .info .title {padding: 5px 0 0 10px;height: 30px;background: #eee;border-bottom: 1px solid #ddd;font-size: 18px;font-weight: bold;}\r\n    .info .close {position: absolute;top: 10px;right: 10px;color: #888;width: 17px;height: 17px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/overlay_close.png');}\r\n    .info .close:hover {cursor: pointer;}\r\n    .info .body {position: relative;overflow: hidden;}\r\n    .info .desc {position: relative;margin: 13px 0 0 90px;height: 75px;}\r\n    .desc .type {overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}\r\n    .desc .price {font-size: 11px;color: #888;margin-top: -2px;}\r\n    .info .img {position: absolute;top: 6px;left: 5px;width: 73px;height: 71px;border: 1px solid #ddd;color: #888;overflow: hidden;}\r\n    .info:after {content: '';position: absolute;margin-left: -12px;left: 50%;bottom: 0;width: 22px;height: 12px;background: url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/vertex_white.png')}\r\n    .info .link {color: #5085BB;}\r\n  </style>\r\n  "]},"metadata":{},"sourceType":"module"}