{"ast":null,"code":"// import { useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport Modal from \"@/components/Modal.vue\";\nimport { getCurrentInstance } from \"vue\";\nimport { ref, computed } from \"vue\";\nimport { useStore } from \"vuex\";\nexport default {\n  components: {\n    Modal\n  },\n  setup() {\n    const email = ref(\"\");\n    const pw = ref(\"\");\n    const store = useStore();\n    const memberId = ref(\"\");\n    const login = async () => {\n      try {\n        const res = await axios.post(\"http://localhost:8090/spaceZBE/member/login\", {\n          email: email.value,\n          password: pw.value\n        }).then(res => {\n          store.commit(\"GET_MEMBERID\", JSON.parse(res.request.response).member_id);\n          console.log(JSON.parse(res.request.response).member_id);\n          console.log(store.state.memberId);\n          localStorage.setItem(\"memberId\", JSON.parse(res.request.response).member_id);\n          onClose();\n        });\n      } catch (error) {\n        console.log(\"error:\", error);\n      }\n    };\n    const {\n      emit\n    } = getCurrentInstance();\n    const onClose = () => {\n      emit(\"close\");\n    };\n    const onDelete = () => {\n      emit(\"delete\");\n    };\n    return {\n      onClose,\n      onDelete,\n      login,\n      email,\n      pw,\n      memberId\n    };\n  }\n};","map":{"version":3,"mappings":"AAiCA;AACA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,wBAAwB;AAC1C,SAASC,kBAAiB,QAAS,KAAK;AACxC,SAASC,GAAG,EAAEC,QAAO,QAAS,KAAK;AACnC,SAASC,QAAO,QAAS,MAAM;AAE/B,eAAe;EACbC,UAAU,EAAE;IACVL;EACF,CAAC;EACDM,KAAK,GAAG;IACN,MAAMC,KAAI,GAAIL,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMM,EAAC,GAAIN,GAAG,CAAC,EAAE,CAAC;IAElB,MAAMO,KAAI,GAAIL,QAAQ,EAAE;IAExB,MAAMM,QAAO,GAAIR,GAAG,CAAC,EAAE,CAAC;IAExB,MAAMS,KAAI,GAAI,YAAY;MACxB,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMb,KAAI,CACnBc,IAAI,CAAC,6CAA6C,EAAE;UACnDN,KAAK,EAAEA,KAAK,CAACO,KAAK;UAClBC,QAAQ,EAAEP,EAAE,CAACM;QACf,CAAC,EACAE,IAAI,CAAEJ,GAAG,IAAK;UACbH,KAAK,CAACQ,MAAM,CACV,cAAc,EACdC,IAAI,CAACC,KAAK,CAACP,GAAG,CAACQ,OAAO,CAACC,QAAQ,CAAC,CAACC,SAAQ,CAC1C;UACDC,OAAO,CAACC,GAAG,CAACN,IAAI,CAACC,KAAK,CAACP,GAAG,CAACQ,OAAO,CAACC,QAAQ,CAAC,CAACC,SAAS,CAAC;UACvDC,OAAO,CAACC,GAAG,CAACf,KAAK,CAACgB,KAAK,CAACf,QAAQ,CAAC;UACjCgB,YAAY,CAACC,OAAO,CAClB,UAAU,EACVT,IAAI,CAACC,KAAK,CAACP,GAAG,CAACQ,OAAO,CAACC,QAAQ,CAAC,CAACC,SAAQ,CAC1C;UACDM,OAAO,EAAE;QACX,CAAC,CAAC;MACN,EAAE,OAAOC,KAAK,EAAE;QACdN,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEK,KAAK,CAAC;MAC9B;IACF,CAAC;IAED,MAAM;MAAEC;IAAK,IAAI7B,kBAAkB,EAAE;IACrC,MAAM2B,OAAM,GAAI,MAAM;MACpBE,IAAI,CAAC,OAAO,CAAC;IACf,CAAC;IACD,MAAMC,QAAO,GAAI,MAAM;MACrBD,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC;IAED,OAAO;MACLF,OAAO;MACPG,QAAQ;MACRpB,KAAK;MACLJ,KAAK;MACLC,EAAE;MACFE;IACF,CAAC;EACH;AACF,CAAC","names":["axios","Modal","getCurrentInstance","ref","computed","useStore","components","setup","email","pw","store","memberId","login","res","post","value","password","then","commit","JSON","parse","request","response","member_id","console","log","state","localStorage","setItem","onClose","error","emit","onDelete"],"sourceRoot":"","sources":["C:\\Users\\qwe17\\golfzon\\vue_prac\\SpaceZFE-1\\SpaceZFE\\src\\components\\LoginModal.vue"],"sourcesContent":["<template>\r\n  <Modal>\r\n    <template v-slot:title> 로그인 </template>\r\n    <template v-slot:body>\r\n      <div class=\"loginform\">\r\n        <input\r\n          class=\"email\"\r\n          v-model=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"이메일\"\r\n        />\r\n        <input\r\n          class=\"password\"\r\n          v-model=\"pw\"\r\n          type=\"password\"\r\n          placeholder=\"비밀번호\"\r\n        />\r\n        <button type=\"button\" class=\"btn btn-secondary\" @click=\"login\">\r\n          로그인\r\n        </button>\r\n        <span>\r\n          <b><i>logo</i></b> 가 처음이신가요?\r\n        </span>\r\n        <br />\r\n        <router-link class=\"submit\" :to=\"{ name: 'insert' }\" @click=\"onClose\">\r\n          회원가입\r\n        </router-link>\r\n      </div>\r\n    </template>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\n// import { useRouter } from \"vue-router\";\r\nimport axios from \"axios\";\r\nimport Modal from \"@/components/Modal.vue\";\r\nimport { getCurrentInstance } from \"vue\";\r\nimport { ref, computed } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\n\r\nexport default {\r\n  components: {\r\n    Modal,\r\n  },\r\n  setup() {\r\n    const email = ref(\"\");\r\n    const pw = ref(\"\");\r\n\r\n    const store = useStore();\r\n\r\n    const memberId = ref(\"\");\r\n\r\n    const login = async () => {\r\n      try {\r\n        const res = await axios\r\n          .post(\"http://localhost:8090/spaceZBE/member/login\", {\r\n            email: email.value,\r\n            password: pw.value,\r\n          })\r\n          .then((res) => {\r\n            store.commit(\r\n              \"GET_MEMBERID\",\r\n              JSON.parse(res.request.response).member_id\r\n            );\r\n            console.log(JSON.parse(res.request.response).member_id);\r\n            console.log(store.state.memberId);\r\n            localStorage.setItem(\r\n              \"memberId\",\r\n              JSON.parse(res.request.response).member_id\r\n            );\r\n            onClose();\r\n          });\r\n      } catch (error) {\r\n        console.log(\"error:\", error);\r\n      }\r\n    };\r\n\r\n    const { emit } = getCurrentInstance();\r\n    const onClose = () => {\r\n      emit(\"close\");\r\n    };\r\n    const onDelete = () => {\r\n      emit(\"delete\");\r\n    };\r\n\r\n    return {\r\n      onClose,\r\n      onDelete,\r\n      login,\r\n      email,\r\n      pw,\r\n      memberId,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-secondary {\r\n  background: blue;\r\n  width: 300px;\r\n  height: 70px;\r\n  font-size: 30px;\r\n  margin-top: 50px;\r\n  margin-bottom: 50px;\r\n  margin-left: 80px;\r\n  margin-right: 80px;\r\n  border-radius: 20px;\r\n}\r\nb {\r\n  color: blue;\r\n}\r\n.loginform {\r\n  align-items: center;\r\n  margin-top: 50px;\r\n}\r\n\r\ninput {\r\n  width: 400px;\r\n  height: 100px;\r\n  text-align: center;\r\n  font-size: 30px;\r\n  margin-left: 40px;\r\n  margin-right: 50px;\r\n  border: 1px solid white;\r\n  border-bottom: 1px solid gray;\r\n}\r\nspan {\r\n  text-align: center;\r\n  font-size: 30px;\r\n}\r\n.submit {\r\n  color: black;\r\n  font-size: 20px;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}